@layout MainLayout
@inherits MyOrdersBase

@if (!IsFarmer)
{
    <MudPaper Class="pa-16 m-auto mt-3" Style="width: 80vw;" Elevation="10">
        <MudSimpleTable Style="overflow-x: auto;">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Date</th>
                    <th>Products</th>
                    <th class="text-center">Price</th>
                    <th class="text-center">View more</th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < MyOrders.Count; i++)
                {
                    int locale = i;
                    int num = i + 1;
                    <tr>
                        <td>@num.</td>
                        <td>@MyOrders[i].FromDate</td>
                        <td>
                            @if (MyOrders[i].CartItems != null)
                            {
                                string titles = "";
                                for (var j = 0; j < MyOrders[i].CartItems.Count(); j++)
                                {
                                    if (j + 1 != MyOrders[i].CartItems.Count())
                                    {
                                        titles += MyOrders[i].CartItems[j].Product.Title + ", ";
                                    }
                                    else
                                    {
                                        titles += MyOrders[i].CartItems[j].Product.Title;
                                    }
                                }
                                @titles
                            }
                        </td>
                        <td class="text-center">@MyOrders[i].Price$</td>
                        <td class="text-center"><MudIconButton Icon="@Icons.Material.Filled.Visibility" Color="Color.Primary" OnClick="() => OpenDialog(MyOrders[locale])" /></td>
                    </tr>
                }
            </tbody>
        </MudSimpleTable>
    </MudPaper>
}
else
{
    <MudTabs Elevation="0" Rounded="true" Centered="true">

        <MudTabPanel Text="Active Orders">
            @foreach(var item in ActiveOrders)
            {
                <p>@item.Id</p>
            }
        </MudTabPanel>

        <MudTabPanel Text="Ended Orders">

        </MudTabPanel>
        
        <MudTabPanel Text="My Orders">
            <MudPaper Class="pa-16 m-auto mt-3" Style="width: 80vw;" Elevation="10">
                <MudSimpleTable Style="overflow-x: auto;">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Date</th>
                            <th>Products</th>
                            <th class="text-center">Price</th>
                            <th class="text-center">View more</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (int i = 0; i < MyOrders.Count; i++)
                        {
                            int locale = i;
                            int num = i + 1;
                            <tr>
                                <td>@num.</td>
                                <td>@MyOrders[i].FromDate</td>
                                <td>
                                    @if (MyOrders[i].CartItems != null)
                                    {
                                        string titles = "";
                                        for (var j = 0; j < MyOrders[i].CartItems.Count(); j++)
                                        {
                                            if (j + 1 != MyOrders[i].CartItems.Count())
                                            {
                                                titles += MyOrders[i].CartItems[j].Product.Title + ", ";
                                            }
                                            else
                                            {
                                                titles += MyOrders[i].CartItems[j].Product.Title;
                                            }
                                        }
                                        @titles
                                    }
                                </td>
                                <td class="text-center">@MyOrders[i].Price$</td>
                                <td class="text-center"><MudIconButton Icon="@Icons.Material.Filled.Visibility" Color="Color.Primary" OnClick="() => OpenDialog(MyOrders[locale])" /></td>
                            </tr>
                        }
                    </tbody>
                </MudSimpleTable>
            </MudPaper>
        </MudTabPanel>

    </MudTabs>
}

